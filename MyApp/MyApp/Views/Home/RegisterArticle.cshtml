@{
    ViewData["Title"] = "Registrar artículo";
}

<div class="mx-auto max-w-3xl">
    <div class="mb-8">
        <h1 class="text-3xl font-bold text-gray-900">Registrar nuevo artículo</h1>
        <p class="mt-2 text-sm text-gray-600">
            Completa el siguiente formulario para vincular el artículo a su inventario y cliente correspondientes. Los campos podrán cambiar en el futuro en función del tipo de artículo seleccionado.
        </p>
    </div>

    <form method="post" enctype="multipart/form-data" class="space-y-8 rounded-xl border border-gray-200 bg-white/90 p-8 shadow-lg">
        <div class="grid gap-6">
            <div>
                <label for="article-name" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Nombre del artículo</label>
                <div class="mt-2">
                    <input id="article-name" name="ArticleName" type="text" placeholder="Ej. Ordenador portátil" aria-describedby="article-name-help" class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500" />
                </div>
                <p id="article-name-help" class="mt-2 text-sm text-gray-500 dark:text-gray-400">Introduce un nombre descriptivo para identificar el artículo en el inventario.</p>
            </div>

            <div>
                <label for="inventory-selector" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Inventario asociado</label>
                <div class="mt-2 grid grid-cols-1">
                    <select id="inventory-selector" name="InventoryId" class="col-start-1 row-start-1 block w-full rounded-md bg-white py-1.5 pr-10 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                        <option value="">Selecciona un inventario</option>
                        <option value="1">Almacén central</option>
                        <option value="2">Almacén norte</option>
                        <option value="3">Almacén sur</option>
                    </select>
                    <svg viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-gray-400 sm:size-4">
                        <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                    </svg>
                </div>
                <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Selecciona el inventario en el que se almacenará el artículo.</p>
            </div>

            <div>
                <label for="client-selector" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Cliente propietario</label>
                <div class="mt-2 grid grid-cols-1">
                    <select id="client-selector" name="ClientId" class="col-start-1 row-start-1 block w-full rounded-md bg-white py-1.5 pr-10 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                        <option value="">Selecciona un cliente</option>
                        <option value="1">Cliente Demo A</option>
                        <option value="2">Cliente Demo B</option>
                        <option value="3">Cliente Demo C</option>
                    </select>
                    <svg viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-gray-400 sm:size-4">
                        <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                    </svg>
                </div>
                <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Escoge el cliente que invertirá en el artículo.</p>
            </div>

            <div>
                <label for="article-type" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Tipo de artículo</label>
                <div class="mt-2 grid grid-cols-1">
                    <select id="article-type" name="ArticleType" aria-describedby="article-type-hint" class="col-start-1 row-start-1 block w-full rounded-md bg-white py-1.5 pr-10 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                        <option value="">Selecciona un tipo</option>
                        <option value="equipment">Equipamiento</option>
                        <option value="vehicle">Vehículo</option>
                        <option value="property">Propiedad</option>
                        <option value="other">Otro</option>
                    </select>
                    <svg viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-gray-400 sm:size-4">
                        <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                    </svg>
                </div>
                <p id="article-type-hint" class="mt-2 text-sm text-gray-500 dark:text-gray-400">El formulario se adaptará a este tipo en futuras versiones.</p>
            </div>

            <div>
                <label for="article-photo" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Fotografía del artículo</label>
                <div class="mt-2 grid grid-cols-1">
                    <input id="article-photo" name="ArticlePhoto" type="file" accept="image/*" class="col-start-1 row-start-1 block w-full rounded-md bg-white py-1.5 pr-10 pl-3 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500" />
                    <svg viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-3 size-5 self-center justify-self-end text-indigo-500 sm:size-4">
                        <path d="M8 1.5a.75.75 0 0 1 .75.75v4.19l1.47-1.47a.75.75 0 1 1 1.06 1.06L8.53 9.78a.75.75 0 0 1-1.06 0L4.72 6.03a.75.75 0 1 1 1.06-1.06l1.47 1.47V2.25A.75.75 0 0 1 8 1.5ZM3.5 9.75a.75.75 0 0 0-1.5 0A5.75 5.75 0 0 0 7.75 15.5h.5A5.75 5.75 0 0 0 14 9.75a.75.75 0 0 0-1.5 0 4.25 4.25 0 0 1-4.25 4.25h-.5A4.25 4.25 0 0 1 3.5 9.75Z" clip-rule="evenodd" fill-rule="evenodd" />
                    </svg>
                </div>
                <p class="mt-2 text-sm text-gray-500 dark:text-gray-400">Sube una imagen clara para identificar el artículo.</p>
            </div>
        </div>

        <div id="dynamic-fields" class="rounded-lg border border-dashed border-indigo-200 bg-indigo-50/60 p-6">
            <h2 class="text-sm font-semibold text-indigo-700">Campos adicionales según el tipo</h2>
            <p class="mt-2 text-sm text-indigo-600">
                En próximas iteraciones, este espacio mostrará campos personalizados dependiendo del tipo de artículo seleccionado.
            </p>
        </div>

        <div class="flex items-center justify-end gap-3">
            <a asp-controller="Home" asp-action="Inventory" class="inline-flex items-center rounded-md bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-xs inset-ring inset-ring-gray-300 hover:bg-gray-50">
                Cancelar
            </a>
            <button type="submit" class="inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                Guardar artículo
            </button>
        </div>
    </form>
</div>

@section Scripts {
    <script>
        const typeSelector = document.getElementById("article-type");
        const dynamicFields = document.getElementById("dynamic-fields");

        if (typeSelector && dynamicFields) {
            typeSelector.addEventListener("change", function () {
                const selectedOption = typeSelector.options[typeSelector.selectedIndex];
                const typeLabel = selectedOption && selectedOption.text ? selectedOption.text.toLowerCase() : "";
                dynamicFields.setAttribute("data-selected-type", typeLabel);
            });
        }
    </script>
}
